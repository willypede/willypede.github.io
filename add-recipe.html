<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 4 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!-- Title -->
    <title>Proyek Mobile Website | Add New Recipe</title>

    <!-- Favicon -->
    <link rel="icon" href="img/core-img/favicon.ico">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <link rel="manifest" href="./manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="PWAGram">
    <link rel="apple-touch-icon" href="./src/images/icons/apple-icon-57x57.png" sizes="57x57">
    <link rel="apple-touch-icon" href="./src/images/icons/apple-icon-60x60.png" sizes="60x60">
    <link rel="apple-touch-icon" href="./src/images/icons/apple-icon-72x72.png" sizes="72x72">
    <link rel="apple-touch-icon" href="./src/images/icons/apple-icon-76x76.png" sizes="76x76">
    <link rel="apple-touch-icon" href="./src/images/icons/apple-icon-114x114.png" sizes="114x114">
    <link rel="apple-touch-icon" href="./src/images/icons/apple-icon-120x120.png" sizes="120x120">
    <link rel="apple-touch-icon" href="./src/images/icons/apple-icon-144x144.png" sizes="144x144">
    <link rel="apple-touch-icon" href="./src/images/icons/apple-icon-152x152.png" sizes="152x152">
    <link rel="apple-touch-icon" href="./src/images/icons/apple-icon-180x180.png" sizes="180x180">
    <meta name="msapplication-TileImage" content="/src/images/icons/app-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#fff">
    <meta name="theme-color" content="#3f51b5">
    <!-- Core Stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Preloader -->
    <div id="preloader">
        <i class="circle-preloader"></i>
        <img src="img/core-img/salad.png" alt="">
    </div>

    <!-- ##### Header Area Start ##### -->
    <header class="header-area">

        <!-- Top Header Area -->
        <div class="top-header-area">
            <div class="container h-100">
                <div class="row h-100 align-items-center justify-content-between">
                    <!-- Breaking News -->
                    <div class="col-12 col-sm-6">
                        <div class="breaking-news">
                            <div id="breakingNewsTicker" class="ticker">
                                <ul>
                                    <li>Hello World!</li>
                                    <li>Welcome to Colorlib Family.</li>
                                    <li>Hello Delicious!</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Top Social Info -->
                    <div class="col-12 col-sm-6">
                        <div class="top-social-info text-right">
                            <a href="https://www.pinterest.com/"><i class="fa fa-pinterest" aria-hidden="true"></i></a>
                            <a href="https://www.facebook.com/"><i class="fa fa-facebook" aria-hidden="true"></i></a>
                            <a href="https://twitter.com/"><i class="fa fa-twitter" aria-hidden="true"></i></a>
                            <a href="https://www.linkedin.com/"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navbar Area -->
        <div class="delicious-main-menu">
            <div class="classy-nav-container breakpoint-off">
                <div class="container">
                    <!-- Menu -->
                    <nav class="classy-navbar justify-content-between" id="deliciousNav">
                        <!-- Logo -->
                        <a class="nav-brand" href="index.html"><img src="img/core-img/logo.png" alt=""></a>
                        <!-- Navbar Toggler -->
                        <div class="classy-navbar-toggler">
                            <span class="navbarToggler"><span></span><span></span><span></span></span>
                        </div>
                        <!-- Menu -->
                        <div class="classy-menu">
                            <!-- close btn -->
                            <div class="classycloseIcon">
                                <div class="cross-wrap"><span class="top"></span><span class="bottom"></span></div>
                            </div>
                            <!-- Nav Start -->
                            <div class="classynav">
                                <ul>
                                    <li><a href="index.html">Home</a></li>
                                    <li class="active"><a href="add-recipe.html">Add New Recipe</a></li>
                                </ul>
                            </div>
                            <!-- Nav End -->
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- ##### Header Area End ##### -->

    <!-- ##### Contact Form Area Start ##### -->
    <div class="contact-area section-padding-0-80">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="section-heading">
                        <h3>Add New Recipe</h3>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-12">
                    <div class="contact-form-area">
                        <form action="" method="post" enctype="multipart/form-data" autocomplete="off" id="myForm">
                            <div class="row">
                                <div class="col-12">
                                    <input type="text" class="form-control" id="name" placeholder="Name of your Recipe" name="name" required>
                                </div>
                                <div class="col-12">
                                    <textarea class="form-control" id="desc" name="desc" cols="30" rows="10" placeholder="Information" required></textarea>
                                </div>
                                <div class="field_wrapper2 col-12">
                                    <div>
                                        <button href="javascript:void(0);" class="add_button2 btn" title="Add field" style="margin-bottom: 10px;">Add more Ingredient</button>
                                    </div>
                                    <div>
                                        <input type="text" class="form-control" id="ingr" name="field_ingredient[]" placeholder="Ingredient" required/>
                                    </div>
                                </div>
                                <div class="field_wrapper col-12">
                                    <div>
                                        <button href="javascript:void(0);" class="add_button btn" title="Add field" style="margin-bottom: 10px;">Add more Step</button>
                                    </div>
                                    <div>
                                        <input type="text" class="form-control" id="step" name="field_step[]" placeholder="Steps" required/>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-group">
                                        <label for="fileFoto">Food Picture</label>
                                        <input type="file" class="form-control-file" id="fileFoto" name="fileFoto" required>
                                      </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <input type="text" id="totalSteps" name="totalSteps" hidden>
                                <input type="text" id="totalIngredients" name="totalIngredients" hidden>
                            </div>
                        </form>
                        <div class="col-12">
                            <button class="btn btn-block" title="SUBMIT" id="go">SUBMIT</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ##### Contact Form Area End ##### -->
    
    <!-- ##### Footer Area Start ##### -->
    <footer class="footer-area">
        <div class="container h-100">
            <div class="row h-100">
                <div class="col-12 h-100 d-flex flex-wrap align-items-center justify-content-between">
                    <!-- Footer Social Info -->
                    <div class="footer-social-info text-right">
                        <a href="https://www.pinterest.com/"><i class="fa fa-pinterest" aria-hidden="true">.</i></a>
                        <a href="https://www.facebook.com/"><i class="fa fa-facebook" aria-hidden="true">.</i></a>
                        <a href="https://twitter.com/"><i class="fa fa-twitter" aria-hidden="true">.</i></a>
                        <a href="https://www.linkedin.com/"><i class="fa fa-linkedin" aria-hidden="true">.</i></a>
                    </div>
                    <!-- Footer Logo -->
                    <div class="footer-logo">
                        <a href="index.html"><img src="img/core-img/logo.png" alt=""></a>
                    </div>
                    <!-- Copywrite -->
                    <p>Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved</p>
                </div>
            </div>
        </div>
    </footer>
    <!-- ##### Footer Area Start ##### -->
    <!-- ##### All Javascript Files ##### -->
    <!-- jQuery-2.2.4 js -->
    <script src="js/jquery/jquery-2.2.4.min.js"></script>
    <!-- Popper js -->
    <script src="js/bootstrap/popper.min.js"></script>
    <!-- Bootstrap js -->
    <script src="js/bootstrap/bootstrap.min.js"></script>
    <!-- All Plugins js -->
    <script src="js/plugins/plugins.js"></script>
    <!-- Active js -->
    <script src="js/active.js"></script>

    <script defer src="js/material.min.js"></script>
    <script src="js/promise.js"></script>
    <script src="js/fetch.js"></script>
    <script src="js/app.js"></script>
    <script src="js/db.js"></script>
    </body>
    <script type="text/javascript">
        $(document).ready(function(){
            var totalSteps = 1;
            var totalIngredients = 1;
            var maxField = 10; //Input fields increment limitation
            var addButton = $('.add_button'); //Add button selector
            var addButton2 = $('.add_button2'); //Add button selector
            var wrapper = $('.field_wrapper'); //Input field wrapper
            var wrapper2 = $('.field_wrapper2'); //Input field wrapper
            var x = 1; //Initial field counter is 1
            var y = 1; //Initial field counter is 1

            $("#go").click(function(e) {
                // var formData = new FormData($(this));
                $("#totalSteps").val(totalSteps);
                $("#totalIngredients").val(totalIngredients);

                var form = $('#myForm')[0];
                var formData = new FormData(form);
                if (document.getElementById("name") && document.getElementById("name").value) {
                    if (document.getElementById("desc") && document.getElementById("desc").value) {
                        if (document.getElementById("ingr") && document.getElementById("ingr").value) {
                            if (document.getElementById("step") && document.getElementById("step").value) {
                                if (document.getElementById("fileFoto") && document.getElementById("fileFoto").value) {
                                    $.ajax({
                                        url: "https://tos.petra.ac.id/~c14170049/Mobweb/addResep.php",
                                        type: "POST",
                                        data: formData,
                                        error: function (asd) {
                                            console.log(asd);
                                        },
                                        success: function (msg) {
                                            alert("Data Added");
                                            $("#myForm")[0].reset();
                                        },
                                        cache: false,
                                        contentType: false,
                                        processData: false
                                    });
                                } else {
                                    alert("Food Picture Required !")
                                }
                            } else {
                                alert("Step(s) Required !")
                            }
                        } else {
                            alert("Ingredient(s) Required !")
                        } 
                    } else {
                    alert("Information Required !")
                    }
                } else {
                alert("Name Required !")
                }
            });

            $(wrapper).on('click', '.add_button', function(e){
                e.preventDefault();
                x++; //Increment field counter
                var fieldHTML = '<input type="text" class="form-control" name="field_step[]" placeholder="Steps" required/>'; //New input field html 
                $(wrapper).append(fieldHTML); //Add field html
                totalSteps++;
            });

            $(wrapper2).on('click', '.add_button2', function(e){
                e.preventDefault();
                y++; //Increment field counter
                var fieldHTML = '<input type="text" class="form-control" name="field_ingredient[]" placeholder="Ingredient" required/>'; //New input field html 
                $(wrapper2).append(fieldHTML); //Add field html
                totalIngredients++;
            });
        });
        </script>
</html>